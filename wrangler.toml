# Cloudflare Workers configuration for Streaming Patterns Library
# Environment: Production

name = "streaming-patterns-production"
main = "worker/index.ts"
compatibility_date = "2024-11-11"

# Account details (set via environment variable or GitHub secrets)
# account_id will be provided via CLOUDFLARE_ACCOUNT_ID secret in CI/CD
# For local development, set via: wrangler login

# Workers configuration
# Domain is configured in Cloudflare - disable workers.dev URL
workers_dev = false

# Custom domain routes
routes = [
  { pattern = "streamingpatterns.com/*", zone_name = "streamingpatterns.com" },
  { pattern = "www.streamingpatterns.com/*", zone_name = "streamingpatterns.com" }
]

# Assets binding (serves static files from dist/)
[assets]
directory = "./dist"
binding = "ASSETS"

# Environment variables
[vars]
ENVIRONMENT = "production"

# Staging environment configuration
[env.staging]
name = "streaming-patterns-staging"
workers_dev = true
vars = { ENVIRONMENT = "staging" }

